# OpenClaw Monitor Docker Compose
# =================================
# Usage:
#   docker-compose up -d          # Start the monitor
#   docker-compose logs -f        # View logs
#   docker-compose down           # Stop the monitor

services:
  openclaw-monitor:
    build: .
    container_name: openclaw-monitor
    ports:
      - "3847:3847"
    volumes:
      # Mount OpenClaw data directory
      # On macOS: ~/.openclaw is usually /Users/username/.openclaw
      # On Linux: ~/.openclaw is usually /home/username/.openclaw
      - ~/.openclaw:/home/openclaw/.openclaw:ro
      # Mount Claude Code data directory (standard projects)
      - ~/.claude:/home/openclaw/.claude:ro
      # Mount Claude Code Coworker data (macOS)
      - type: bind
        source: /Users/peter/Library/Application Support/Claude
        target: /home/openclaw/claude-coworker
        read_only: true
    environment:
      - NODE_ENV=production
      - PORT=3847
      - OPENCLAW_PATH=/home/openclaw/.openclaw
      - CLAUDE_CODE_PATH=/home/openclaw/.claude
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3847/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

networks:
  default:
    name: openclaw-network
